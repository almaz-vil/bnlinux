'\" t 

.TH "bnlinux" "1" "19\ \&МАРТА\ \&2021" "bnlinux 0.0.7" "bnlinux"

.SH "НАЗВАНИЕ"
BNLinux - программа упростить Вашу работу с клавиатурой при наборе различных текстов.
.PP
Функции программы:
.PP
.RS 4
1. Озвучивание нажатия клавиш клавиатуры.
.PP
2. Авто завершение слов.
.PP
3. Информирование об отсутствии введённого слова в словаре (информирование об опечатках).
.PP
4. Обеспечение фиксация клавиши <Shift> для ввода знаков. 
.PP
5. Автоматическое добавление пробела при выборе авто завершения слов из словаря.
.PP
6. Обработка знаков препинания (!?.) при вводе текста, в частности удаление авто пробела (см. п.5) и преобразование последующей строчной буквы в заглавную.
.PP
.RE
Первоначальный набор функций определяется набором параметров при запуск
.SH "СИНТАКСИС"
sudo \fBbnlinux\fR [\fB-b\fR] [\fB-r\fR] [\fB-f\fR] [\fB-s\fR] [\fB-p\fR] [\fB-z\fR] [\fB-d|-n\fR] [\fB-v\fR] [\fB-?\fR]
.SH "ОПИСАНИЕ"
.PP
Программу необходимо запустить от имени суперпользователя \fBsudo bnlinux\fR для доступа к драйверу устройства клавиатуры.
.PP
Алгоритм работы программы.
.PP
.RS 4
Программа получает информацию о нажатой клавиши. С помощью файла \fB/opt/bnlinux/local/alfavid.txt\fR сопоставляется номер (местоположение символа в файле) нажатой клавишей с символом из файла. И формируется набор символов(часть слова).
.RE
.PP
В режиме БН:
.PP
.RS 4
Происходить поиск сформированного набора символов в списке слов из файла \fB/local/russ.txt\fR с первого символа в строке. А в файл \fB/tmp/bnlinux_sv\fR происходить запись найденной строки и ещё пять строк следующих за ней из файла \fB/local/russ.txt\fR.
.PP
Специальные символы для программы и реакция на них.
.RE
.PP
.RS 8
Символы вводимые клавишами <пробел> и <Enter> приводят к сбросу сформированного набора символов.
.PP
Символ вводимый клавишей <Backspace> приводит к удалению последнего символа из сформировавшего набора символов.
.PP
Символы вводимые с помощью клавиш:\fB<0>,<1>,<2>,<3>,<4>,<5>,<6>\fR приводят к завершению вводимого слова из видимого списка и которое соответствовало номеру введенной строки. Фактически происходит генерация событий \fBXTestFakeKeyEvent\fR X Window System, удаление символов из сформировавшего набора и очистка файла \fB/tmp/bnlinux_sv\fR.
.RE
.PP
.RS 4
Для отображения списка слов в среде рабочего стола Cinnamon используется панельный апплет горизонтального расположения. Апплет осуществляет мониторинг файл \fB/tmp/bnlinux_sv\fR и выводить его содержание на панель. Доступен выбор цвета букв и фона апплета, а также размер шрифта. Настройки осуществляются через стандартное окно настройки среды рабочего стола Cinnamon. 
.PP
Апплет расположен в каталоге \fB/usr/share/cinnamon/applets/bnlinux@bnabor.ru/\fR
.RE
.PP
Режим ЗК
.PP
.RS 4
В режиме ЗК воспроизводиться звуковой файл из каталога \fB/opt/bnlinux/local/sound/\fR в соответствии с кодом нажатой клавишей.
.RE
.PP
Режим ОРФО
.PP
.RS 4
В режиме ОРФО происходить поиск сформированного набора символов в списке слов из файла \fB/local/russ.txt\fR с первого символа в строке. В файл \fB/tmp/bnlinux_sv\fR происходить запись строки "ОПЕЧАТКА" и воспроизведение звука \fB/opt/bnlinux/local/sound/VClovar.wav\fR.
.PP
Специальные символы для режима и реакция на них.
.RE
.PP
.RS 8 
Символы вводимые клавишами <пробел> и <Enter> приводят к сбросу сформированного набора символов. Символ вводимый клавишей <Backspace> приводит к удалению последнего символа из сформировавшего набора символов. 
.RE
.PP
Режим SHIFT
.PP
.RS 4
Режим SHIFT служить для облегчения ввода знаков (!"№;%:?*)_+ следующим образом.
.RE
.PP
.RS 8 
Нажмите клавишу \fB<Pause>\fR, апплет выводить подсказку "Для выхода нажмите \fB<F12>\fR. Продолжайте работу \fB<1>\fR..\fB<0>\fR", после чего нажав к примеру клавишу \fB<3>\fR получем знак номер № и подсказка исчезает. В английской раскладке клавиатуры получаем иные знаки. Если был указан параметр \fB-r\fR, апплет выводить подсказку "Для выхода нажмите \fB<F12>\fR. Или режимы: ЗК(вкл)\fB<F6>\fR, БН(выкл)\fB<F5>\fR, ЗНАК(вкл)\fB<F9>\fR, ОРФО(вкл)\fB<F7>\fR, SHIFT(выкл)\fB<F8>\fR. Продолжайте работу \fB<1>\fR..\fB<0>\fR"
.RE
.PP
Режим ЗНАК
.PP
.RS 4
Режим ЗНАК служить для формировании заглавной буквы после точки, знака восклицания и знака вопроса. В данном режиме после точки автоматически добавляется символ пробела и вводимая прописная буква заменяется на заглавную. Причём если до точки был добавлен автоматический пробел вставляемый при автозавершение слова в режиме БН, то он удаляется.
.RE
.PP
Режимы можно активировать с помощью ключей при запуске, а также включить и отключить необходимый режим с помощью функциональных клавиш: ЗК клавишей \fB<F6>\fR, БН клавишей\fB<F5>\fR, ЗНАК клавишей \fB<F9>\fR, ОРФО клавишей \fB<F7>\fR, SHIFT клавишей \fB<F8>\fR.
.PP
 Для этого вам необходимо нажать клавишу \fB<Pause>\fR и нажать соответствующею функциональную клавишу. После чего на апплете отобразится информация об текущих активных режимов. 
.SH "ФАЙЛЫ"
.RS 4
\fB/opt/bnlinux/local/alfavid.txt\fR файл содержит символы в 8-битной кодировке Windows-1251(CP1251) русского языка. Положение конкретного символа в файле соответствует информации о нажатой клавиши клавиатуры 
.PP
\fB/opt/bnlinux/local/alfavideng.txt\fR файл содержит символы в 8-битной кодировке Windows-1251(CP1251) английского языка, для формирования события \fBXTestFakeKeyEvent\fR X Window System. Положение конкретного символа в файле соответствует информации о нажатой клавиши клавиатуры 
.PP
\fB/opt/bnlinux/local/russ.txt\fR файл содержит слова в 8-битной кодировке Windows-1251(CP1251) русского языка. Слова располагаются в алфавитном порядке.
.PP
\fB/local/sound/\fR каталог содержит файлы формата .wav 
.PP
\fB/local/sound/info/\fR каталог содержит файлы формата .wav звукового информирования о переключении режимов 
.PP
\fB/tmp/bnlinux_sv\fR файл служить буфером в  среде рабочего стола Cinnamon для панельного апплета. Необходим для работы апплета и информирования пользователя.
.PP
\fB/var/run/bnlinux.pid\fR создаётся файл при запуске программы и удалится при завершение программы. Необходим чтобы работал один экземпляр программы.
.RE
.SH "ПАРАМЕТРЫ"
\fB-h\fR
.RS 4
Короткая справка.
.RE
.PP
\fB-v\fR
.RS 4
Версия программы.
.RE
.PP
\fB-b\fR
.RS 4
активация режима автоматического завершение слов (БН)
.RE
.PP
\fB-f\fR
.RS 4
активация режима опечатка (ОРФО)
.RE
.PP
\fB-s\fR
.RS 4
активация режима звуковая клавиатура (ЗК)
.RE
.PP
\fB-p\fR
.RS 4
активация режима залипания <Shift>(ввода знаков ! и т.д.) (SHIFT)
.RE
.PP
\fB-z\fR
.RS 4
активация режима реакция на .!? (ЗНАК)
.RE
.PP
\fB-r\fR
.RS 4
активация возможности включения/выключения режимов с помощью горячих клавиш во время работы программы  
.RE
.PP
\fB-n\fR
.RS 4
Необходим для уточнения устройства ввода. По умолчанию программа использует первое устройство ввода в системе. Если у Вас ноутбук и используется внешняя USB клавиатура, то используйте данный параметр с указанием имени устройства. 
.PP
Параметр с пустым именим устройства /fB -n "" /fR служить для выводы списка имён устройств ввода в системе.
.RE
.PP
\fB-d\fR
.RS 4
Необходим для уточнения устройства ввода. По умолчанию программа использует первое устройство ввода в системе. Если у Вас ноутбук и используется внешняя USB клавиатура, то использование данного параметра \fBОБЯЗАТЕЛЬНО!\fR или смотрите параметр /fB-n/fR. Для удобства используйте следующий скрипт. 
.RE
.PP
.RS 8
.nf
#!/bin/bash
r=$(ls /dev/input/ | grep "event*" | wc -l);
while [ $r != -1 ]
	do
	y=$(sudo input-events -t 0.1 $r );
	if [[ $y == *"$1"* ]]; then
		$(sudo /opt/bnlinux/bin/bnlinux \fB-s\fR -d /dev/input/event$r  );
	fi 
	r=$(( $r-1));
	done
.fi
.RE
.PP
.RS 4
Для работы предложенного скрипта необходим пакет  \fBinput-utils\fR.
.RE
.PP
\fB-k\fR
.RS 4
Возможна завершение программы \fBbnlinux\fR и удаление файла \fB/var/run/bnlinux.pid\fR.
.RE
.PP
.SH "SECURITY CONSIDERATIONS"
При вводе с клавиатуры конфиденциальную информацию отключите программу в целях безопасности конфиденциальной информации. 
.SH "АВТОРЫ"
Поляков Дмитрий Владимирович <almaz-vil@list.ru>